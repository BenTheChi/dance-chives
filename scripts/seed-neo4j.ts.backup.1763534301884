import { signupUser } from "../src/db/queries/user";
import driver from "../src/db/driver";

async function seedNeo4j() {
  console.log("üå± Seeding Neo4j database using existing query functions...");
  console.log("‚ÑπÔ∏è  Note: Neo4j data is cleared by prisma/seed.ts");
  console.log(
    "‚ÑπÔ∏è  This script only creates users if they don't exist (using MERGE)"
  );

  try {
    // Create users matching the Prisma seed structure
    const testUsers = null;

    // Create users using the signupUser function
    for (const user of testUsers) {
      try {
        await signupUser(user.id, user.profile);
        console.log(
          `‚úÖ Created user: ${user.profile.displayName} (${user.profile.username})`
        );
      } catch (error) {
        console.log(
          `‚ÑπÔ∏è  User ${user.profile.username} may already exist, skipping...`
        );
      }
    }

    // Note: Events, Workshops, and Sessions are created by prisma/seed.ts, not here
    // This prevents duplicates when both seed scripts run
    console.log(
      "‚ÑπÔ∏è  Events, Workshops, and Sessions are created by prisma/seed.ts, skipping here."
    );

    console.log("üéâ Neo4j seeding completed using existing query functions!");
  } catch (error) {
    console.error("‚ùå Neo4j seeding failed:", error);
    throw error;
  }
}

// Run the seeding if this file is executed directly
if (require.main === module) {
  seedNeo4j()
    .then(() => {
      console.log("‚úÖ Neo4j seeding script completed successfully");
      process.exit(0);
    })
    .catch((error) => {
      console.error("‚ùå Neo4j seeding script failed:", error);
      process.exit(1);
    });
}

export { seedNeo4j };
